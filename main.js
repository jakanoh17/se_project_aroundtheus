!function(){"use strict";class e{constructor(e,t,s){this.data=e,this.cardSelector=t,this._handleImageClick=s,this._element=document.querySelector(this.cardSelector).content.querySelector(".gallery__card").cloneNode(!0),this._location=this._element.querySelector(".gallery__location"),this._image=this._element.querySelector(".gallery__image"),this._likeButton=this._element.querySelector(".gallery__like-button"),this._trashButton=this._element.querySelector(".gallery__trash-icon")}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._handleLikeButtonClick()})),this._trashButton.addEventListener("click",(()=>{this._handleDeleteButtonClick()})),this._image.addEventListener("click",this._handleImageClick)}_handleLikeButtonClick(){this._likeButton.classList.toggle("gallery__like-button_selected")}_handleDeleteButtonClick(){this._trashButton.closest(".gallery__card").remove()}render(){return this._location.textContent=this.data.name,this._image.setAttribute("alt",this.data.name),this._image.setAttribute("src",this.data.link),this._setEventListeners(),this._element}}const t=document.querySelector(".profile__edit-button"),s=document.forms["edit-form"],n=document.querySelector(".profile__add-button"),i=document.querySelector(".modal_type_new-card"),r=document.forms["new-card-form"],o=(i.querySelector(".modal__input_type_card-title"),i.querySelector(".modal__input_type_card-link"),{formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-button",inactiveButtonClass:"modal__submit-button_inactive",inputErrorClass:"modal__input_invalid",errorClass:"modal__error-message_visible"}),a=document.querySelector(".modal__input_type_name"),l=document.querySelector(".modal__input_type_description");class c{constructor(e){this.popup=document.querySelector(e),this._closeButton=this.popup.querySelector(".modal__close-button"),this._boundCloseHandler=this.close.bind(this),this._boundOutsideClickHandler=this._handleOutsideClick.bind(this),this._boundEscHandler=this._handleEscClose.bind(this)}open(){this.popup.classList.add("modal_opened"),this.popup.addEventListener("click",this._boundOutsideClickHandler),document.addEventListener("keydown",this._boundEscHandler),this._closeButton.addEventListener("click",this._boundCloseHandler)}close(){this.popup.classList.remove("modal_opened"),this.popup.removeEventListener("click",this._boundOutsideClickHandler),document.removeEventListener("keydown",this._boundEscHandler),this._closeButton.removeEventListener("click",this._boundCloseHandler)}_handleEscClose(e){"Escape"===e.key&&this.close()}_handleOutsideClick(e){e.target===this.popup&&this.close()}}class u extends c{constructor(e,t){super(e),this._handleSubmit=t.bind(this)}_getInputValues(){const e=[...this.popup.querySelectorAll("input")],t={};for(const s of e)t[s.name]=s.value;return t}open(){super.open(),this.popup.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit(this._getInputValues())}))}}class d{constructor(e,t){this.settings=e,this.form=t,this._submitButton=t.querySelector(this.settings.submitButtonSelector),this._inputList=this.form.querySelectorAll(this.settings.inputSelector)}_findInvalidInputs(){return Array.from(this.form.querySelectorAll(this.settings.inputSelector)).some((e=>!e.validity.valid))}_toggleSubmitButton(e){"disable"===e||this._findInvalidInputs()?(this._submitButton.setAttribute("disabled",!0),this._submitButton.classList.add(this.settings.inactiveButtonClass)):(this._submitButton.removeAttribute("disabled"),this._submitButton.classList.remove(this.settings.inactiveButtonClass))}_toggleInputError(e){e.validity.valid?this._hideErrorMessage(e):this._showErrorMessage(e)}_showErrorMessage(e){const t=e.validationMessage,s=this.form.querySelector(`.${e.id}-err-msg`);s.textContent=t,s.classList.add(this.settings.errorClass),e.classList.add(this.settings.inputErrorClass)}_hideErrorMessage(e){this.form.querySelector(`.${e.id}-err-msg`).classList.remove(this.settings.errorClass),e.classList.remove(this.settings.inputErrorClass)}enableValidation(){this._inputList.forEach((e=>{e.addEventListener("input",(e=>{this._toggleInputError(e.target),this._toggleSubmitButton()}))}))}resetValidation(){this._toggleSubmitButton("disable"),this._inputList.forEach((e=>{this._hideErrorMessage(e)}))}}const _=new d(o,r),m=new d(o,s),h=new class extends c{constructor(e){super(e),this._enlrgImg=this.popup.querySelector(".modal__enlarged-image"),this._enlrgImgCap=this.popup.querySelector(".modal__caption")}open(e){super.open(),this._enlrgImg.src=e.target.src,this._enlrgImg.alt=e.target.alt,this._enlrgImgCap.textContent=e.target.alt}}(".modal_type_enlarged-card"),p=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=document.querySelector(t)}addItem(e){this._container.prepend(e)}renderItems(){this._items.forEach((e=>{this._element=this._renderer(e),this.addItem(this._element)}))}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:S},".gallery"),g=new u(".modal_type_new-card",(function(e){p.addItem(S(e)),g.close(),r.reset(),_.resetValidation()})),y=new u(".modal_type_profile",(function(e){b.setUserInfo(e),y.close()})),b=new class{constructor(e){let{userNameSelec:t,descrSelec:s}=e;this.userName=document.querySelector(t),this.descr=document.querySelector(s)}getUserInfo(){return{name:this.userName.textContent,description:this.descr.textContent}}setUserInfo(e){let{name:t,description:s}=e;this.userName.textContent=t,this.descr.textContent=s}}({userNameSelec:".profile__name",descrSelec:".profile__title"});function S(t){return new e(t,"#card-template",v).render()}function v(e){h.open(e)}p.renderItems(),n.addEventListener("click",(()=>{g.open()})),t.addEventListener("click",(function(){y.open();const e=b.getUserInfo();a.value=e.name,l.value=e.description,m.resetValidation()})),_.enableValidation(),m.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YUMsWUFBWUYsR0FDekJELEVBQWN2RSxPQUNoQixJQWhDTXlFLEVBQWUsSUd6Q04sTUFDYnpILFdBQUFBLENBQVd3RyxHQUFnQyxJQUEvQixjQUFFbUIsRUFBYSxXQUFFQyxHQUFZcEIsRUFDdkNwRyxLQUFLeUgsU0FBV3RILFNBQVNDLGNBQWNtSCxHQUN2Q3ZILEtBQUswSCxNQUFRdkgsU0FBU0MsY0FBY29ILEVBQ3RDLENBR0FHLFdBQUFBLEdBQ0UsTUFBTyxDQUNMdEcsS0FBTXJCLEtBQUt5SCxTQUFTckcsWUFDcEJ3RyxZQUFhNUgsS0FBSzBILE1BQU10RyxZQUU1QixDQUVBa0csV0FBQUEsQ0FBV08sR0FBd0IsSUFBdkIsS0FBRXhHLEVBQUksWUFBRXVHLEdBQWFDLEVBQy9CN0gsS0FBS3lILFNBQVNyRyxZQUFjQyxFQUM1QnJCLEtBQUswSCxNQUFNdEcsWUFBY3dHLENBQzNCLEdId0JnQyxDQUNoQ0wsY0FBZSxpQkFDZkMsV0FBWSxvQkFJUCxTQUFTVCxFQUFXbEgsR0FFekIsT0FEb0IsSUFBSUYsRUFBS0UsRUFBTSxpQkFBa0JpSSxHQUNsQzNHLFFBQ3JCLENBS0EsU0FBUzJHLEVBQXNCekUsR0FDN0J5QyxFQUFjNUMsS0FBS0csRUFDckIsQ0FMQThDLEVBQVFXLGNBd0JSbkYsRUFBY2YsaUJBQWlCLFNBQVMsS0FDdENvRyxFQUFpQjlELE1BQU0sSUFHekIxQixFQUFrQlosaUJBQWlCLFNBQVMsV0FDMUN1RyxFQUFjakUsT0FDZCxNQUFNNkUsRUFBZVYsRUFBYU0sY0FDbEN0RixFQUFjNEIsTUFBUThELEVBQWExRyxLQUNuQ2lCLEVBQWUyQixNQUFROEQsRUFBYUgsWUFDcEMvQixFQUFxQkYsaUJBQ3ZCLElBR0FDLEVBQXFCSCxtQkFDckJJLEVBQXFCSixrQiIsInNvdXJjZXMiOlsid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoZGF0YSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XHJcbiAgICB0aGlzLmRhdGEgPSBkYXRhO1xyXG4gICAgdGhpcy5jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICAgIHRoaXMuX2VsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLmNhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5nYWxsZXJ5X19jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICB0aGlzLl9sb2NhdGlvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5nYWxsZXJ5X19sb2NhdGlvblwiKTtcclxuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmdhbGxlcnlfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5nYWxsZXJ5X19saWtlLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuX3RyYXNoQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmdhbGxlcnlfX3RyYXNoLWljb25cIik7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VCdXR0b25DbGljaygpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl90cmFzaEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVCdXR0b25DbGljaygpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9pbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlSW1hZ2VDbGljayk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlTGlrZUJ1dHRvbkNsaWNrKCkge1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiZ2FsbGVyeV9fbGlrZS1idXR0b25fc2VsZWN0ZWRcIik7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRGVsZXRlQnV0dG9uQ2xpY2soKSB7XHJcbiAgICB0aGlzLl90cmFzaEJ1dHRvbi5jbG9zZXN0KFwiLmdhbGxlcnlfX2NhcmRcIikucmVtb3ZlKCk7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICB0aGlzLl9sb2NhdGlvbi50ZXh0Q29udGVudCA9IHRoaXMuZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5faW1hZ2Uuc2V0QXR0cmlidXRlKFwiYWx0XCIsIHRoaXMuZGF0YS5uYW1lKTtcclxuICAgIHRoaXMuX2ltYWdlLnNldEF0dHJpYnV0ZShcInNyY1wiLCB0aGlzLmRhdGEubGluayk7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxyXG4gIH0sXHJcbl07XHJcbmV4cG9ydCBjb25zdCBlZGl0UHJvZmlsZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZU1vZGFsRm9ybSA9IGRvY3VtZW50LmZvcm1zW1wiZWRpdC1mb3JtXCJdO1xyXG5leHBvcnQgY29uc3QgYWRkQ2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuY29uc3QgbmV3Q2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF90eXBlX25ldy1jYXJkXCIpO1xyXG5leHBvcnQgY29uc3QgbmV3Q2FyZE1vZGFsRm9ybSA9IGRvY3VtZW50LmZvcm1zW1wibmV3LWNhcmQtZm9ybVwiXTtcclxuZXhwb3J0IGNvbnN0IG5ld0NhcmRUaXRsZSA9IG5ld0NhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLm1vZGFsX19pbnB1dF90eXBlX2NhcmQtdGl0bGVcIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgbmV3Q2FyZExpbmsgPSBuZXdDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcclxuICBcIi5tb2RhbF9faW5wdXRfdHlwZV9jYXJkLWxpbmtcIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zdWJtaXQtYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fc3VibWl0LWJ1dHRvbl9pbmFjdGl2ZVwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfaW52YWxpZFwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yLW1lc3NhZ2VfdmlzaWJsZVwiLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHByb2ZOYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbnB1dF90eXBlX25hbWVcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9mRGVzY3JJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIubW9kYWxfX2lucHV0X3R5cGVfZGVzY3JpcHRpb25cIlxyXG4pO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbiA9IHRoaXMucG9wdXAucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fYm91bmRDbG9zZUhhbmRsZXIgPSB0aGlzLmNsb3NlLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLl9ib3VuZE91dHNpZGVDbGlja0hhbmRsZXIgPSB0aGlzLl9oYW5kbGVPdXRzaWRlQ2xpY2suYmluZCh0aGlzKTtcclxuICAgIHRoaXMuX2JvdW5kRXNjSGFuZGxlciA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5wb3B1cC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgdGhpcy5wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5fYm91bmRPdXRzaWRlQ2xpY2tIYW5kbGVyKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2JvdW5kRXNjSGFuZGxlcik7XHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5fYm91bmRDbG9zZUhhbmRsZXIpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLnBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICB0aGlzLnBvcHVwLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9ib3VuZE91dHNpZGVDbGlja0hhbmRsZXIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5fYm91bmRFc2NIYW5kbGVyKTtcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9ib3VuZENsb3NlSGFuZGxlcik7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlT3V0c2lkZUNsaWNrKGV2dCkge1xyXG4gICAgaWYgKGV2dC50YXJnZXQgPT09IHRoaXMucG9wdXApIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVTdWJtaXQpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlU3VibWl0ID0gaGFuZGxlU3VibWl0LmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBpbnB1dExpc3QgPSBbLi4udGhpcy5wb3B1cC5xdWVyeVNlbGVjdG9yQWxsKFwiaW5wdXRcIildO1xyXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuXHJcbiAgICBmb3IgKGNvbnN0IGlucHV0IG9mIGlucHV0TGlzdCkge1xyXG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBpbnB1dFZhbHVlcztcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB0aGlzLnBvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtKSB7XHJcbiAgICB0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XHJcbiAgICB0aGlzLmZvcm0gPSBmb3JtO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5zZXR0aW5ncy5pbnB1dFNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIF9maW5kSW52YWxpZElucHV0cygpIHtcclxuICAgIGNvbnN0IGZvcm1JbnB1dHMgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLnNldHRpbmdzLmlucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgcmV0dXJuIGZvcm1JbnB1dHMuc29tZSgoaW5wdXQpID0+IHtcclxuICAgICAgcmV0dXJuICFpbnB1dC52YWxpZGl0eS52YWxpZDtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZVN1Ym1pdEJ1dHRvbihwYXJhbSkge1xyXG4gICAgaWYgKHBhcmFtID09PSBcImRpc2FibGVcIiB8fCB0aGlzLl9maW5kSW52YWxpZElucHV0cygpKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5zZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5zZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF90b2dnbGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0Vycm9yTWVzc2FnZShpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUVycm9yTWVzc2FnZShpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3Nob3dFcnJvck1lc3NhZ2UoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnItbXNnYCk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLnNldHRpbmdzLmVycm9yQ2xhc3MpO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVFcnJvck1lc3NhZ2UoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnItbXNnYCk7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLnNldHRpbmdzLmVycm9yQ2xhc3MpO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlSW5wdXRFcnJvcihldnQudGFyZ2V0KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVTdWJtaXRCdXR0b24oKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX3RvZ2dsZVN1Ym1pdEJ1dHRvbihcImRpc2FibGVcIik7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVFcnJvck1lc3NhZ2UoaW5wdXRFbGVtZW50KTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCB7XHJcbiAgZWRpdFByb2ZpbGVCdXR0b24sXHJcbiAgYWRkQ2FyZEJ1dHRvbixcclxuICBuZXdDYXJkTW9kYWxGb3JtLFxyXG4gIHByb2ZOYW1lSW5wdXQsXHJcbiAgcHJvZkRlc2NySW5wdXQsXHJcbiAgdmFsaWRhdGlvbkNvbmZpZyxcclxuICBwcm9maWxlTW9kYWxGb3JtLFxyXG4gIGluaXRpYWxDYXJkcyxcclxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuXHJcbi8vQ0xBU1MgSU5TVEFOQ0VTXHJcbmNvbnN0IG5ld0NhcmRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgdmFsaWRhdGlvbkNvbmZpZyxcclxuICBuZXdDYXJkTW9kYWxGb3JtXHJcbik7XHJcblxyXG5jb25zdCBwcm9maWxlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gIHZhbGlkYXRpb25Db25maWcsXHJcbiAgcHJvZmlsZU1vZGFsRm9ybVxyXG4pO1xyXG5jb25zdCBlbmxyZ0ltZ1BvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiLm1vZGFsX3R5cGVfZW5sYXJnZWQtY2FyZFwiKTtcclxuY29uc3Qgc2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gIHsgaXRlbXM6IGluaXRpYWxDYXJkcywgcmVuZGVyZXI6IGNyZWF0ZUNhcmQgfSxcclxuICBcIi5nYWxsZXJ5XCJcclxuKTtcclxuY29uc3QgbmV3Q2FyZEZvcm1Qb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiLm1vZGFsX3R5cGVfbmV3LWNhcmRcIixcclxuICBoYW5kbGVOZXdDYXJkRm9ybVN1Ym1pdFxyXG4pO1xyXG5jb25zdCBwcm9mRm9ybVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIubW9kYWxfdHlwZV9wcm9maWxlXCIsXHJcbiAgaGFuZGxlUHJvZmlsZVN1Ym1pdFxyXG4pO1xyXG5jb25zdCBwcm9mVXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIHVzZXJOYW1lU2VsZWM6IFwiLnByb2ZpbGVfX25hbWVcIixcclxuICBkZXNjclNlbGVjOiBcIi5wcm9maWxlX190aXRsZVwiLFxyXG59KTtcclxuXHJcbi8vIFBPUFVMQVRFIElOSVRJQUwgQ0FSRFNcclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNhcmQoZGF0YSkge1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3IENhcmQoZGF0YSwgXCIjY2FyZC10ZW1wbGF0ZVwiLCBoYW5kbGVDYXJkRW5sYXJnZW1lbnQpO1xyXG4gIHJldHVybiBjYXJkRWxlbWVudC5yZW5kZXIoKTtcclxufVxyXG5cclxuc2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG5cclxuLy8gRU5MQVJHRSBDQVJEIElNQUdFXHJcbmZ1bmN0aW9uIGhhbmRsZUNhcmRFbmxhcmdlbWVudChldnQpIHtcclxuICBlbmxyZ0ltZ1BvcHVwLm9wZW4oZXZ0KTtcclxufVxyXG5cclxuLy8gU1VCTUlUIE5FVyBDQVJEIE1PREFMXHJcbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVOZXdDYXJkRm9ybVN1Ym1pdChuZXdDYXJkRGF0YSkge1xyXG4gIHNlY3Rpb24uYWRkSXRlbShjcmVhdGVDYXJkKG5ld0NhcmREYXRhKSk7XHJcblxyXG4gIG5ld0NhcmRGb3JtUG9wdXAuY2xvc2UoKTtcclxuICBuZXdDYXJkTW9kYWxGb3JtLnJlc2V0KCk7XHJcblxyXG4gIG5ld0NhcmRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG59XHJcblxyXG4vLyBTVUJNSVQgUFJPRklMRSBNT0RBTFxyXG5leHBvcnQgZnVuY3Rpb24gaGFuZGxlUHJvZmlsZVN1Ym1pdChuZXdQcm9mRGF0YSkge1xyXG4gIHByb2ZVc2VySW5mby5zZXRVc2VySW5mbyhuZXdQcm9mRGF0YSk7XHJcbiAgcHJvZkZvcm1Qb3B1cC5jbG9zZSgpO1xyXG59XHJcblxyXG4vLyBPUEVOIE1PREFMU1xyXG5hZGRDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgbmV3Q2FyZEZvcm1Qb3B1cC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuZWRpdFByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIGlucHV0UHJvZmlsZUluZm8oKSB7XHJcbiAgcHJvZkZvcm1Qb3B1cC5vcGVuKCk7XHJcbiAgY29uc3QgY3VyclVzZXJJbmZvID0gcHJvZlVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgcHJvZk5hbWVJbnB1dC52YWx1ZSA9IGN1cnJVc2VySW5mby5uYW1lO1xyXG4gIHByb2ZEZXNjcklucHV0LnZhbHVlID0gY3VyclVzZXJJbmZvLmRlc2NyaXB0aW9uO1xyXG4gIHByb2ZpbGVGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG59KTtcclxuXHJcbi8vIFZBTElEQVRJT05cclxubmV3Q2FyZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5wcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2VubHJnSW1nID0gdGhpcy5wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19lbmxhcmdlZC1pbWFnZVwiKTtcclxuICAgIHRoaXMuX2VubHJnSW1nQ2FwID0gdGhpcy5wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXB0aW9uXCIpO1xyXG4gIH1cclxuXHJcbiAgb3BlbihldnQpIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIHRoaXMuX2VubHJnSW1nLnNyYyA9IGV2dC50YXJnZXQuc3JjO1xyXG4gICAgdGhpcy5fZW5scmdJbWcuYWx0ID0gZXZ0LnRhcmdldC5hbHQ7XHJcbiAgICB0aGlzLl9lbmxyZ0ltZ0NhcC50ZXh0Q29udGVudCA9IGV2dC50YXJnZXQuYWx0O1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBzZWxlY3Rvcikge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oaXRlbSkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoaXRlbSk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgICB0aGlzLmFkZEl0ZW0odGhpcy5fZWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgdXNlck5hbWVTZWxlYywgZGVzY3JTZWxlYyB9KSB7XHJcbiAgICB0aGlzLnVzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyTmFtZVNlbGVjKTtcclxuICAgIHRoaXMuZGVzY3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGRlc2NyU2VsZWMpO1xyXG4gIH1cclxuXHJcbiAgLy8gZ2V0IGN1cnJlbnQgdXNlciBpbmZvXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLnVzZXJOYW1lLnRleHRDb250ZW50LFxyXG4gICAgICBkZXNjcmlwdGlvbjogdGhpcy5kZXNjci50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGRlc2NyaXB0aW9uIH0pIHtcclxuICAgIHRoaXMudXNlck5hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5kZXNjci50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiZGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJ0aGlzIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfZWxlbWVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfbG9jYXRpb24iLCJfaW1hZ2UiLCJfbGlrZUJ1dHRvbiIsIl90cmFzaEJ1dHRvbiIsIl9zZXRFdmVudExpc3RlbmVycyIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlTGlrZUJ1dHRvbkNsaWNrIiwiX2hhbmRsZURlbGV0ZUJ1dHRvbkNsaWNrIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiY2xvc2VzdCIsInJlbW92ZSIsInJlbmRlciIsInRleHRDb250ZW50IiwibmFtZSIsInNldEF0dHJpYnV0ZSIsImxpbmsiLCJlZGl0UHJvZmlsZUJ1dHRvbiIsInByb2ZpbGVNb2RhbEZvcm0iLCJmb3JtcyIsImFkZENhcmRCdXR0b24iLCJuZXdDYXJkTW9kYWwiLCJuZXdDYXJkTW9kYWxGb3JtIiwidmFsaWRhdGlvbkNvbmZpZyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwicHJvZk5hbWVJbnB1dCIsInByb2ZEZXNjcklucHV0IiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwicG9wdXAiLCJfY2xvc2VCdXR0b24iLCJfYm91bmRDbG9zZUhhbmRsZXIiLCJjbG9zZSIsImJpbmQiLCJfYm91bmRPdXRzaWRlQ2xpY2tIYW5kbGVyIiwiX2hhbmRsZU91dHNpZGVDbGljayIsIl9ib3VuZEVzY0hhbmRsZXIiLCJfaGFuZGxlRXNjQ2xvc2UiLCJvcGVuIiwiYWRkIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImtleSIsInRhcmdldCIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVTdWJtaXQiLCJzdXBlciIsIl9oYW5kbGVTdWJtaXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dExpc3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRWYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwicHJldmVudERlZmF1bHQiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtIiwiX3N1Ym1pdEJ1dHRvbiIsIl9pbnB1dExpc3QiLCJfZmluZEludmFsaWRJbnB1dHMiLCJBcnJheSIsImZyb20iLCJzb21lIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl90b2dnbGVTdWJtaXRCdXR0b24iLCJwYXJhbSIsInJlbW92ZUF0dHJpYnV0ZSIsIl90b2dnbGVJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiX2hpZGVFcnJvck1lc3NhZ2UiLCJfc2hvd0Vycm9yTWVzc2FnZSIsImVycm9yTWVzc2FnZSIsInZhbGlkYXRpb25NZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJlbmFibGVWYWxpZGF0aW9uIiwiZm9yRWFjaCIsInJlc2V0VmFsaWRhdGlvbiIsIm5ld0NhcmRGb3JtVmFsaWRhdG9yIiwicHJvZmlsZUZvcm1WYWxpZGF0b3IiLCJlbmxyZ0ltZ1BvcHVwIiwiX2VubHJnSW1nIiwiX2VubHJnSW1nQ2FwIiwic3JjIiwiYWx0Iiwic2VjdGlvbiIsIl9yZWYiLCJzZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiYWRkSXRlbSIsIml0ZW0iLCJwcmVwZW5kIiwicmVuZGVySXRlbXMiLCJjcmVhdGVDYXJkIiwibmV3Q2FyZEZvcm1Qb3B1cCIsIm5ld0NhcmREYXRhIiwicmVzZXQiLCJwcm9mRm9ybVBvcHVwIiwibmV3UHJvZkRhdGEiLCJwcm9mVXNlckluZm8iLCJzZXRVc2VySW5mbyIsInVzZXJOYW1lU2VsZWMiLCJkZXNjclNlbGVjIiwidXNlck5hbWUiLCJkZXNjciIsImdldFVzZXJJbmZvIiwiZGVzY3JpcHRpb24iLCJfcmVmMiIsImhhbmRsZUNhcmRFbmxhcmdlbWVudCIsImN1cnJVc2VySW5mbyJdLCJzb3VyY2VSb290IjoiIn0=